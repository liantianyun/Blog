框架设计时针对开发层面的核心要素

1.1 提升用户的开发体验

* 报错信息
* 输出信息

推论：源码内部，必然存在大量的此类提升开发体验的代码，包括各类异常处理等，这些都跟核心逻辑无关，阅读源码时候，需有意识的剔除。

1.2 控制框架的体积

通过区分开发环境和生产环境、使提示信息等相关代码成为dead code，再通过打包工具进行移除

1.3 做好tree-shaking

函数副作用：调用该函数时，会影响外部作用域

现在打包工具本质支持遵循esm规范的treeking，但打包工具无法判断调用函数是否会产生副作用，需要开发者自行添加`/*$__PURE__*/`表明，以达到良好的treeShaking效果。

1.4 构建产物输出

| 使用场景  | Script标签使用  | 支持ESM的浏览器内Script标签使用  | requirejs使用、服务端渲染  |
| :------------: | :------------: | :------------: | :------------: |
|  格式 | IIFE  | esm  | cjs  |
|  配置方法 | output.format === 'iife'  | output.format === 'esm'  | output.format === 'cjs'   |

1.5 特性开关

框架设计师，可以通过在打包时配置变量+代码中使用变量的方式，来实现由用户自行决定是否开启某个特性，这样做的好处是可以进一步提高Treeshaking的粒度。

在Vue3中，可以通过配置__VUE_OPTIONS_API__配置来决定是否开始options api

1.6 错误处理

需提供机制，由用户决定如何处理错误，具体来说，提供注册错误处理函数的机制，代码内部，统一进行错误处理，调用用户注册的错误处理函数。

1.7 ts支持

